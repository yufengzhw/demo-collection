{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.string.includes.js","webpack:///./src/views/rubic-cube/rubic-cube.vue?f6dc","webpack:///./src/components/cube/cube.vue?701c","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/createClass.js","webpack:///./src/common/js/requestAnimFrame.js","webpack:///./src/components/cube/cube.js","webpack:///src/components/cube/cube.vue","webpack:///./src/components/cube/cube.vue?f9fb","webpack:///./src/components/cube/cube.vue","webpack:///src/views/rubic-cube/rubic-cube.vue","webpack:///./src/views/rubic-cube/rubic-cube.vue?4bc6","webpack:///./src/views/rubic-cube/rubic-cube.vue","webpack:///./node_modules/core-js/library/fn/object/define-property.js","webpack:///./node_modules/core-js/library/modules/es6.object.define-property.js","webpack:///./node_modules/core-js/modules/_fails-is-regexp.js","webpack:///./node_modules/core-js/modules/es7.array.includes.js","webpack:///./src/views/rubic-cube/rubic-cube.vue?7701","webpack:///./node_modules/@babel/runtime-corejs2/core-js/object/define-property.js","webpack:///./src/components/cube/cube.vue?6131","webpack:///./node_modules/core-js/modules/_is-regexp.js","webpack:///./node_modules/core-js/modules/_string-context.js"],"names":["$export","context","INCLUDES","P","F","includes","searchString","this","indexOf","arguments","length","undefined","_vm","_h","$createElement","_c","_self","staticClass","attrs","_m","staticRenderFns","comment","ref","on","$event","preventDefault","stopPropagation","mouseDown","mouseMove","mouseUp","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","requestAnimFrame","window","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","rotationAroundWorldX","obj","rad","y0","position","y","z0","z","q","Quaternion","setFromAxisAngle","Vector3","quaternion","premultiply","Math","cos","sin","rotationAroundWorldY","x0","x","rotationAroundWorldZ","Rotation","cornerBlocks","edgeBlocks","centerBlock","axis","directionSign","blocks","concat","sign","rotationFunc","blockStatus","actionFactor","console","error","originIndexes","map","block","forEach","index","r","l","u","d","f","b","cr","cu","cf","RotationR","RotationL","RotationU","RotationD","RotationF","RotationB","RotationCR","RotationCU","RotationCF","Rotations","R","L","U","D","B","CR","CU","CF","rotations","factors","X","Y","Z","RubicCube","blockCenterDis","blockSize","actionTime","cube","initCube","rotating","actions","registerActions","group","Mesh","meshFace","down","MeshBasicMaterial","color","upper","back","front","right","left","inside","j","k","status","cubeGeom","CubeGeometry","mats","push","translateX","translateY","translateZ","add","scene","remove","rotation","callback","newAction","that","startTime","Date","now","lastTime","rotateBlocks","Array","fill","ind","children","render","adjustBlockStatus","splice","basicMove","nowTime","angle","PI","move","rotateOnWorldAxis","factor","name","data","width","height","moveTime","updating","dragging","moving","lastX","lastY","mounted","$nextTick","registerKeyEvents","registerMove","methods","reset","rubicCube","unbindScene","bindScene","rotate","updateView","document","onkeydown","event","code","reverse","tag","ctrlKey","toLowerCase","initScene","camera","set","renderer","setClearColor","setSize","$refs","append","domElement","ambientLight","spotLight","getSpotLight","rect","top","bottom","ev","buttons","setRotationFromEuler","component","components","ListComment","Cube","$Object","Object","module","exports","it","desc","defineProperty","S","MATCH","KEY","re","e","$includes","el","isObject","cof","isRegExp","defined","NAME","String"],"mappings":"2IAEA,IAAIA,EAAU,EAAQ,QAClBC,EAAU,EAAQ,QAClBC,EAAW,WAEfF,EAAQA,EAAQG,EAAIH,EAAQI,EAAI,EAAQ,OAAR,CAA8BF,GAAW,SAAU,CACjFG,SAAU,SAAkBC,GAC1B,SAAUL,EAAQM,KAAMD,EAAcJ,GACnCM,QAAQF,EAAcG,UAAUC,OAAS,EAAID,UAAU,QAAKE,O,2CCTnE,IAAI,EAAS,WAAa,IAAIC,EAAIL,KAASM,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,SAAS,CAACA,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,KAAK,CAACH,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,SAAS,KAAKA,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,KAAK,CAACN,EAAIO,GAAG,MAAM,IAAI,IACzRC,EAAkB,CAAC,WAAa,IAAIR,EAAIL,KAASM,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,QAAQ,KAAON,EAAIS,YAAY,K,YCDzM,EAAS,WAAa,IAAIT,EAAIL,KAASM,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACO,IAAI,OAAOL,YAAY,OAAOM,GAAG,CAAC,UAAY,SAASC,GAAyD,OAAjDA,EAAOC,iBAAiBD,EAAOE,kBAAyBd,EAAIe,UAAUH,IAAS,UAAY,SAASA,GAAyD,OAAjDA,EAAOC,iBAAiBD,EAAOE,kBAAyBd,EAAIgB,UAAUJ,IAAS,QAAU,SAASA,GAAyD,OAAjDA,EAAOC,iBAAiBD,EAAOE,kBAAyBd,EAAIiB,QAAQL,QAC/b,EAAkB,G,sDCDP,SAASM,EAAgBC,EAAUC,GAChD,KAAMD,aAAoBC,GACxB,MAAM,IAAIC,UAAU,qC,yBCAxB,SAASC,EAAkBC,EAAQC,GACjC,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAM1B,OAAQ2B,IAAK,CACrC,IAAIC,EAAaF,EAAMC,GACvBC,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GAEjD,IAAuBN,EAAQG,EAAWI,IAAKJ,IAIpC,SAASK,EAAaX,EAAaY,EAAYC,GAG5D,OAFID,GAAYV,EAAkBF,EAAYc,UAAWF,GACrDC,GAAaX,EAAkBF,EAAaa,GACzCb,ECfF,IAAMe,EAAoB,WAC/B,OAAOC,OAAOC,uBACZD,OAAOE,0BACPF,OAAOG,6BACPH,OAAOI,yBACPJ,OAAOG,4BALsB,GCQjC,SAASE,EAAsBC,EAAKC,GAElC,IAAMC,EAAKF,EAAIG,SAASC,EAClBC,EAAKL,EAAIG,SAASG,EAClBC,EAAI,IAAIC,OACdD,EAAEE,iBAAiB,IAAIC,OAAQ,EAAG,EAAG,GAAIT,GACzCD,EAAIW,WAAWC,YAAYL,GAC3BP,EAAIG,SAASC,EAAIS,KAAKC,IAAIb,GAAOC,EAAKW,KAAKE,IAAId,GAAOI,EACtDL,EAAIG,SAASG,EAAIO,KAAKC,IAAIb,GAAOI,EAAKQ,KAAKE,IAAId,GAAOC,EAGxD,SAASc,EAAsBhB,EAAKC,GAElC,IAAMgB,EAAKjB,EAAIG,SAASe,EAClBb,EAAKL,EAAIG,SAASG,EAClBC,EAAI,IAAIC,OACdD,EAAEE,iBAAiB,IAAIC,OAAQ,EAAG,EAAG,GAAIT,GACzCD,EAAIW,WAAWC,YAAYL,GAC3BP,EAAIG,SAASe,EAAIL,KAAKC,IAAIb,GAAOgB,EAAKJ,KAAKE,IAAId,GAAOI,EACtDL,EAAIG,SAASG,EAAIO,KAAKC,IAAIb,GAAOI,EAAKQ,KAAKE,IAAId,GAAOgB,EAGxD,SAASE,EAAsBnB,EAAKC,GAElC,IAAMgB,EAAKjB,EAAIG,SAASe,EAClBhB,EAAKF,EAAIG,SAASC,EAClBG,EAAI,IAAIC,OACdD,EAAEE,iBAAiB,IAAIC,OAAQ,EAAG,EAAG,GAAIT,GACzCD,EAAIW,WAAWC,YAAYL,GAC3BP,EAAIG,SAASe,EAAIL,KAAKC,IAAIb,GAAOgB,EAAKJ,KAAKE,IAAId,GAAOC,EACtDF,EAAIG,SAASC,EAAIS,KAAKC,IAAIb,GAAOC,EAAKW,KAAKE,IAAId,GAAOgB,E,IAGlDG,E,WACJ,WAAaC,EAAcC,EAAYC,EAAaC,EAAMC,GAAe,UAQvExE,KAAKoE,aAAeA,EACpBpE,KAAKqE,WAAaA,EAClBrE,KAAKsE,YAAcA,EACnBtE,KAAKuE,KAAOA,EACZvE,KAAKyE,OAASL,EAAaM,OAAOL,EAAY,CAACC,IAC/CtE,KAAK2E,KAAOH,EACZxE,KAAK4E,aACM,MAATL,EACIzB,EACS,MAATyB,EACER,EACAG,E,uCAGJnB,EAAKC,GAET,OAAOhD,KAAK4E,aAAa7B,EAAKC,EAAMhD,KAAK2E,Q,wCAGxBE,EAAaC,GAAc,WAGvB,IAAjBA,IAAwC,IAAlBA,GAAwC,IAAjBA,GAC/CC,QAAQC,MAAM,mCAEhB,IAAIC,EAAgBjF,KAAKoE,aAAac,KAAI,SAAAC,GAAK,OAAIN,EAAY5E,QAAQkF,MACvEnF,KAAKoE,aAAagB,SAAQ,SAACD,EAAOE,GAChCR,EAAYI,EAAcI,IAAU,EAAKjB,cAAciB,EAAQP,EAAe,EAAKV,aAAajE,QAAU,EAAKiE,aAAajE,WAG9H8E,EAAgBjF,KAAKqE,WAAWa,KAAI,SAAAC,GAAK,OAAIN,EAAY5E,QAAQkF,MACjEnF,KAAKqE,WAAWe,SAAQ,SAACD,EAAOE,GAC9BR,EAAYI,EAAcI,IAAU,EAAKhB,YAAYgB,EAAQP,EAAe,EAAKT,WAAWlE,QAAU,EAAKkE,WAAWlE,e,KAKtHiE,EAAe,CACnBkB,EAAG,CAAC,MAAO,MAAO,MAAO,OACzBC,EAAG,CAAC,MAAO,MAAO,MAAO,OACzBC,EAAG,CAAC,MAAO,MAAO,MAAO,OACzBC,EAAG,CAAC,MAAO,MAAO,MAAO,OACzBC,EAAG,CAAC,MAAO,MAAO,MAAO,OACzBC,EAAG,CAAC,MAAO,MAAO,MAAO,OACzBC,GAAI,CAAC,KAAM,KAAM,KAAM,MACvBC,GAAI,CAAC,KAAM,KAAM,KAAM,MACvBC,GAAI,CAAC,KAAM,KAAM,KAAM,OAGnBzB,EAAa,CACjBiB,EAAG,CAAC,KAAM,KAAM,KAAM,MACtBC,EAAG,CAAC,KAAM,KAAM,KAAM,MACtBC,EAAG,CAAC,KAAM,KAAM,KAAM,MACtBC,EAAG,CAAC,KAAM,KAAM,KAAM,MACtBC,EAAG,CAAC,KAAM,KAAM,KAAM,MACtBC,EAAG,CAAC,KAAM,KAAM,KAAM,MACtBC,GAAI,CAAC,IAAK,IAAK,IAAK,KACpBC,GAAI,CAAC,IAAK,IAAK,IAAK,KACpBC,GAAI,CAAC,IAAK,IAAK,IAAK,MAGhBC,EAAY,IAAI5B,EAASC,EAAakB,EAAGjB,EAAWiB,EAAG,IAAK,KAAM,GAClEU,EAAY,IAAI7B,EAASC,EAAamB,EAAGlB,EAAWkB,EAAG,IAAK,IAAK,GACjEU,EAAY,IAAI9B,EAASC,EAAaoB,EAAGnB,EAAWmB,EAAG,IAAK,KAAM,GAClEU,EAAY,IAAI/B,EAASC,EAAaqB,EAAGpB,EAAWoB,EAAG,IAAK,IAAK,GACjEU,EAAY,IAAIhC,EAASC,EAAasB,EAAGrB,EAAWqB,EAAG,IAAK,KAAM,GAClEU,EAAY,IAAIjC,EAASC,EAAauB,EAAGtB,EAAWsB,EAAG,IAAK,IAAK,GACjEU,EAAa,IAAIlC,EAASC,EAAawB,GAAIvB,EAAWuB,GAAI,IAAK,KAAM,GACrEU,EAAa,IAAInC,EAASC,EAAayB,GAAIxB,EAAWwB,GAAI,IAAK,KAAM,GACrEU,EAAa,IAAIpC,EAASC,EAAa0B,GAAIzB,EAAWyB,GAAI,IAAK,KAAM,GAerEU,EAAY,CAChBC,EAAGV,EACHW,EAAGV,EACHW,EAAGV,EACHW,EAAGV,EACHrG,EAAGsG,EACHU,EAAGT,EACHU,GAAIT,EACJU,GAAIT,EACJU,GAAIT,EACJjB,EAAG,CACD2B,UAAW,CAAClB,EAAWM,GACvBa,QAAS,CAAC,EAAG,IAEf3B,EAAG,CACD0B,UAAW,CAACjB,EAAWK,GACvBa,QAAS,CAAC,GAAI,IAEhB1B,EAAG,CACDyB,UAAW,CAAChB,EAAWK,GACvBY,QAAS,CAAC,EAAG,IAEfzB,EAAG,CACDwB,UAAW,CAACf,EAAWI,GACvBY,QAAS,CAAC,GAAI,IAEhBxB,EAAG,CACDuB,UAAW,CAACd,EAAWI,GACvBW,QAAS,CAAC,EAAG,IAEfvB,EAAG,CACDsB,UAAW,CAACb,EAAWG,GACvBW,QAAS,CAAC,GAAI,IAEhBC,EAAG,CACDF,UAAW,CAAClB,EAAWM,EAAYL,GACnCkB,QAAS,CAAC,EAAG,GAAI,IAEnBE,EAAG,CACDH,UAAW,CAAChB,EAAWK,EAAYJ,GACnCgB,QAAS,CAAC,EAAG,GAAI,IAEnBG,EAAG,CACDJ,UAAW,CAACd,EAAWI,EAAYH,GACnCc,QAAS,CAAC,EAAG,GAAI,KAIAI,E,WACnB,WAAaC,EAAgBC,EAAWC,GAAY,UAClDzH,KAAKuH,eAAiBA,EACtBvH,KAAKwH,UAAYA,EACjBxH,KAAKyH,WAAaA,EAClBzH,KAAK6E,YAAc,CACjB,MAAO,KAAM,MAAO,KAAM,IAAK,KAAM,MAAO,KAAM,MAClD,KAAM,IAAK,KAAM,IAAK,IAAK,IAAK,KAAM,IAAK,KAC3C,MAAO,KAAM,MAAO,KAAM,IAAK,KAAM,MAAO,KAAM,OAEpD7E,KAAK0H,KAAO1H,KAAK2H,WACjB3H,KAAK4H,UAAW,EAChB5H,KAAK6H,QAAU,GACf7H,KAAK8H,kB,6CAgBL,IAXA,IAAMC,EAAQ,IAAIC,OAEZC,EAAW,CACfC,KAAM,IAAIC,OAAkB,CAAEC,MAAO,WACrCC,MAAO,IAAIF,OAAkB,CAAEC,MAAO,WACtCE,KAAM,IAAIH,OAAkB,CAAEC,MAAO,WACrCG,MAAO,IAAIJ,OAAkB,CAAEC,MAAO,UACtCI,MAAO,IAAIL,OAAkB,CAAEC,MAAO,QACtCK,KAAM,IAAIN,OAAkB,CAAEC,MAAO,UACrCM,OAAQ,IAAIP,OAAkB,CAAEC,MAAO,YAEhCtG,EAAI,EAAGA,EAAI,EAAGA,IACrB,IAAK,IAAI6G,EAAI,EAAGA,EAAI,EAAGA,IACrB,IAAK,IAAIC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAMvD,EAAY,EAAJvD,EAAY,EAAJ6G,EAAQC,EACxBC,EAAS7I,KAAK6E,YAAYQ,GAC1ByD,EAAW,IAAIC,OAAa/I,KAAKwH,UAAWxH,KAAKwH,UAAWxH,KAAKwH,WACjEwB,EAAO,GACbA,EAAKC,KAAKJ,EAAO/I,SAAS,KAAOmI,EAASO,MAAQP,EAASS,QAC3DM,EAAKC,KAAKJ,EAAO/I,SAAS,KAAOmI,EAASQ,KAAOR,EAASS,QAC1DM,EAAKC,KAAKJ,EAAO/I,SAAS,KAAOmI,EAASI,MAAQJ,EAASS,QAC3DM,EAAKC,KAAKJ,EAAO/I,SAAS,KAAOmI,EAASC,KAAOD,EAASS,QAC1DM,EAAKC,KAAKJ,EAAO/I,SAAS,KAAOmI,EAASM,MAAQN,EAASS,QAC3DM,EAAKC,KAAKJ,EAAO/I,SAAS,KAAOmI,EAASK,KAAOL,EAASS,QAC1D,IAAMhB,EAAO,IAAIM,OAAKc,EAAUE,GAChCtB,EAAKwB,YAAYN,EAAI,EAAI,GAAK5I,KAAKuH,gBACnCG,EAAKyB,YAAY,EAAIrH,EAAI,GAAK9B,KAAKuH,gBACnCG,EAAK0B,YAAY,EAAIT,EAAI,GAAK3I,KAAKuH,gBACnCQ,EAAMsB,IAAI3B,GAIhB,OAAOK,I,gCAGEuB,GACTA,EAAMD,IAAIrJ,KAAK0H,Q,kCAGJ4B,GACXA,EAAMC,OAAOvJ,KAAK0H,Q,gCAGT8B,EAAU1E,EAAc2E,GAA0D,WAAhDhC,EAAgD,uDAAnCzH,KAAKyH,WAAYiC,IAAkB,yDAiB3F,GAZIF,aAAoBrF,IACtBqF,EAAW,CAACA,GACZ1E,EAAe,CAACA,IAEd4E,GACF1J,KAAK6H,QAAQoB,KAAK,CAChBO,WACA1E,eACA2E,WACAhC,gBAGAzH,KAAK4H,SAAT,CAGA,IAAM+B,EAAO3J,KACbA,KAAK4H,UAAW,EAChB,IAAMgC,EAAYC,KAAKC,MACnBC,EAAWH,EAGTI,EAAe,IAAIC,MAAMT,EAASrJ,QAAQ+J,KAAK,MAAMhF,KAAI,iBAAM,MACrElF,KAAK6E,YAAYO,SAAQ,SAACD,EAAOE,GAC/BmE,EAASpE,SAAQ,SAACE,EAAG6E,GACf7E,EAAEb,OAAO3E,SAASqF,IACpB6E,EAAaG,GAAKlB,KAAK,EAAKvB,KAAK0C,SAAS/E,UAoChDgF,IA/BA,SAASA,IACP,GAAIN,GAAYH,EAAYnC,GAO1B,GALA+B,EAASpE,SAAQ,SAACE,EAAG6E,GACnB7E,EAAEgF,kBAAkBX,EAAK9E,YAAaC,EAAaqF,OAErDR,EAAK/B,UAAW,EAChB+B,EAAK9B,QAAQ0C,OAAO,EAAG,GACnBZ,EAAK9B,QAAQ1H,OAAS,EAAG,OAE4BwJ,EAAK9B,QAAQ,GAA9D2B,EAFqB,EAErBA,SAAU1E,EAFW,EAEXA,aAAc2E,EAFH,EAEGA,SAAUhC,EAFb,EAEaA,WACxCkC,EAAKa,UAAUhB,EAAU1E,EAAc2E,EAAUhC,GAAY,QAVjE,CAcA,IAAIgD,EAAUZ,KAAKC,MACfW,GAAWb,EAAYnC,IACzBgD,EAAUb,EAAYnC,GAGxBuC,EAAa5E,SAAQ,SAACX,EAAQ0F,GAC5B,IAAMO,EAAQ9G,KAAK+G,GAAK,GAAKF,EAAUV,GAAYtC,EAAa3C,EAAaqF,GAC7E1F,EAAOW,SAAQ,SAAAD,GACbqE,EAASW,GAAKS,KAAKzF,EAAOuF,SAG9BX,EAAWU,EACXhB,IACAjH,EAAiB6H,O,6BAMb9F,EAAMmG,GACZ1K,KAAK0H,KAAKmD,kBAAkBtG,EAAMmG,K,wCAGjB,WACXf,EAAO3J,KACZ,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,KAAKoF,SAAQ,SAAAjD,GACtC,EAAK,OAAD,OAAQA,IAAS,SAAUsH,GAAwC,IAA9BhC,EAA8B,uDAAjBkC,EAAKlC,WACzDkC,EAAKa,UAAUhE,EAAUrE,GAAM,EAAGsH,EAAUhC,IAE9C,EAAK,OAAD,OAAQtF,EAAR,MAAkB,SAAUsH,GAAwC,IAA9BhC,EAA8B,uDAAjBkC,EAAKlC,WAC1DkC,EAAKa,UAAUhE,EAAUrE,IAAO,EAAGsH,EAAUhC,IAE/C,EAAK,OAAD,OAAQtF,EAAR,MAAkB,SAAUsH,GAAwC,IAA9BhC,EAA8B,uDAAjBkC,EAAKlC,WAC1DkC,EAAKa,UAAUhE,EAAUrE,GAAM,EAAGsH,EAAUhC,OAG/C,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAKrC,SAAQ,SAAAjD,GACrD,EAAK,OAAD,OAAQA,IAAS,SAAUsH,GAAwC,IAA9BhC,EAA8B,uDAAjBkC,EAAKlC,WACzDkC,EAAKa,UACHhE,EAAUrE,GAAK8E,UACfT,EAAUrE,GAAK+E,QACfuC,EACAhC,IAGJ,EAAK,OAAD,OAAQtF,EAAR,MAAkB,SAAUsH,GAAwC,IAA9BhC,EAA8B,uDAAjBkC,EAAKlC,WAC1DkC,EAAKa,UACHhE,EAAUrE,GAAK8E,UACfT,EAAUrE,GAAK+E,QAAQhC,KAAI,SAAA4F,GAAM,OAAK,EAAIA,KAC1CrB,EACAhC,IAGJ,EAAK,OAAD,OAAQtF,EAAR,MAAkB,SAAUsH,GAAwC,IAA9BhC,EAA8B,uDAAjBkC,EAAKlC,WAC1DkC,EAAKa,UACHhE,EAAUrE,GAAK8E,UACfT,EAAUrE,GAAK+E,QAAQhC,KAAI,SAAA4F,GAAM,OAAI,EAAIA,KACzCrB,EACAhC,W,KC3UV,GACEsD,KAAM,OACNC,KAFF,WAGI,MAAO,CACLC,MAAO,IACPC,OAAQ,IACRC,SAAU,IACVC,UAAU,EACVC,UAAU,EACVC,QAAQ,EACRC,OAAQ,EACRC,OAAQ,IAGZC,QAdF,WAcA,WACIzL,KAAK0L,WAAU,WACb,EAAN,eAEI1L,KAAK2L,oBACL3L,KAAK4L,gBAEPC,QAAS,CACPC,MADJ,WAGM9L,KAAK+L,UAAUC,YAAYhM,KAAKsJ,OAChCtJ,KAAK+L,UAAY,IAAI,EAA3B,qBACM/L,KAAK+L,UAAUE,UAAUjM,KAAKsJ,OAC9BtJ,KAAK+L,UAAUG,OAAO,IAAI,EAAhC,gBACMlM,KAAK+L,UAAUG,OAAO,IAAI,EAAhC,iBACMlM,KAAKmM,cAEPR,kBAVJ,WAUA,WACMlJ,OAAO2J,SAASC,UAAY,SAAlC,GACY,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,QAAQvM,SAASwM,EAAMC,MAC1F,EAAV,4CACA,iBACU,EAAV,UAIIX,aAnBJ,WAmBA,WACM,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAKxG,SAAQ,SAA1F,GACQ,EAAR,8BACUoH,EACV,2DACA,4DAII5B,KA5BJ,SA4BA,OACY6B,IAAO,CAAC,IAAK,IAAK,OAASC,IAC/BD,EAAMA,EAAIE,eAEZ3M,KAAK,OAAX,eAEI4M,UAlCJ,WAoCM5M,KAAKsJ,MAAQ,IAAI,EAAvB,KACMtJ,KAAK6M,OAAS,IAAI,EAAxB,sCACM7M,KAAK6M,OAAO3J,SAAS4J,IAAI,EAAG,EAAG,IAC/B9M,KAAK+M,SAAW,IAAI,EAA1B,KACM/M,KAAK+M,SAASC,cAAc,WAC5BhN,KAAK+M,SAASE,QAAQjN,KAAKiL,MAAOjL,KAAKkL,QACvClL,KAAKkN,MAAMxF,KAAKyF,OAAOnN,KAAK+M,SAASK,YAGrCpN,KAAK+L,UAAY,IAAI,EAA3B,qBACM/L,KAAK+L,UAAUE,UAAUjM,KAAKsJ,OAG9BtJ,KAAKqN,aAAe,IAAI,EAA9B,gBACMrN,KAAKsN,UAAYtN,KAAKuN,eACtBvN,KAAKsJ,MAAMD,IAAIrJ,KAAKqN,cACpBrN,KAAKsJ,MAAMD,IAAIrJ,KAAKsN,WAEpBtN,KAAK+L,UAAUG,OAAO,IAAI,EAAhC,gBACMlM,KAAK+L,UAAUG,OAAO,IAAI,EAAhC,iBACMlM,KAAKmM,cAEPoB,aA1DJ,WA4DM,IAAN,YACA,gBAGM,OAFAD,EAAUpK,SAAS4J,IAAI,EAAG,EAAG,IAC7BQ,EAAU1L,OAAS,IAAI,EAA7B,KACa0L,GAETnB,WAlEJ,WAkEA,WACUnM,KAAKoL,WAGTpL,KAAKoL,UAAW,EAChBpL,KAAK+M,SAAS1C,OAAOrK,KAAKsJ,MAAOtJ,KAAK6M,QACtC7M,KAAK0L,WAAU,WACb,EAAR,iBAIItK,UA7EJ,SA6EA,GACM,IAAN,YACA,YACA,mCACUoM,EAAK/E,MAAQxE,GAAKA,EAAIuJ,EAAKhF,OAASgF,EAAKC,KAAOtK,GAAKA,EAAIqK,EAAKE,SAChE1N,KAAKuL,MAAQtH,EACbjE,KAAKwL,MAAQrI,EACbnD,KAAKqL,UAAW,IAGpBhK,UAvFJ,SAuFA,GACM,KAAIrB,KAAKuL,MAAQ,GAAjB,CAGA,IAAN,YACA,YACM,GAAmB,IAAfoC,EAAGC,QAAP,CAGA,IAAN,UACA,mBACA,mBACM5N,KAAKuL,MAAQtH,EACbjE,KAAKwL,MAAQrI,EACbnD,KAAK+L,UAAUG,OAAO,IAAI,EAAhC,eACMlM,KAAK+L,UAAUG,OAAO,IAAI,EAAhC,eACM,IAAN,+BAGA,gDACA,gDACA,gDACMlM,KAAK+L,UAAUrE,KAAKmG,qBAAqB,IAAI,EAAnD,aACM7N,KAAKmM,gBAEP7K,QAhHJ,WAiHUtB,KAAKuL,MAAQ,EACfvL,KAAKqL,UAAW,EAGdrL,KAAKqL,UACPrL,KAAKmM,gBChKgV,I,wBCQzV2B,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QCIf,GACE/C,KAAM,aACNC,KAFF,WAGI,MAAO,CACLlK,QAAS,CACf,qCACA,iDACA,qCACA,iDACA,qCACA,iDACA,qCACA,iDACA,qCACA,iDACA,qCACA,iDACA,+CACA,+CACA,+CACA,gBACA,iBAIEiN,WAAY,CACVC,YAAJ,OACIC,KAAJ,IClDmW,ICQ/V,G,UAAY,eACd,EACA,EACApN,GACA,EACA,KACA,WACA,OAIa,e,gCCnBf,EAAQ,QACR,IAAIqN,EAAU,EAAQ,QAAuBC,OAC7CC,EAAOC,QAAU,SAAwBC,EAAInM,EAAKoM,GAChD,OAAOL,EAAQM,eAAeF,EAAInM,EAAKoM,K,uBCHzC,IAAI9O,EAAU,EAAQ,QAEtBA,EAAQA,EAAQgP,EAAIhP,EAAQI,GAAK,EAAQ,QAAmB,SAAU,CAAE2O,eAAgB,EAAQ,QAAgB9I,K,qBCFhH,IAAIgJ,EAAQ,EAAQ,OAAR,CAAkB,SAC9BN,EAAOC,QAAU,SAAUM,GACzB,IAAIC,EAAK,IACT,IACE,MAAMD,GAAKC,GACX,MAAOC,GACP,IAEE,OADAD,EAAGF,IAAS,GACJ,MAAMC,GAAKC,GACnB,MAAOlJ,KACT,OAAO,I,kCCRX,IAAIjG,EAAU,EAAQ,QAClBqP,EAAY,EAAQ,OAAR,EAA6B,GAE7CrP,EAAQA,EAAQG,EAAG,QAAS,CAC1BE,SAAU,SAAkBiP,GAC1B,OAAOD,EAAU9O,KAAM+O,EAAI7O,UAAUC,OAAS,EAAID,UAAU,QAAKE,MAIrE,EAAQ,OAAR,CAAiC,a,oCCXjC,yBAA8jB,EAAG,G,uBCAjkBgO,EAAOC,QAAU,EAAQ,S,kCCAzB,yBAAwjB,EAAG,G,qBCC3jB,IAAIW,EAAW,EAAQ,QACnBC,EAAM,EAAQ,QACdP,EAAQ,EAAQ,OAAR,CAAkB,SAC9BN,EAAOC,QAAU,SAAUC,GACzB,IAAIY,EACJ,OAAOF,EAASV,UAAmClO,KAA1B8O,EAAWZ,EAAGI,MAA0BQ,EAAsB,UAAXD,EAAIX,M,4CCLlF,IAAIY,EAAW,EAAQ,QACnBC,EAAU,EAAQ,QAEtBf,EAAOC,QAAU,SAAU1E,EAAM5J,EAAcqP,GAC7C,GAAIF,EAASnP,GAAe,MAAM2B,UAAU,UAAY0N,EAAO,0BAC/D,OAAOC,OAAOF,EAAQxF","file":"js/chunk-ed0e9f34.6fe3bfee.js","sourcesContent":["// 21.1.3.7 String.prototype.includes(searchString, position = 0)\n'use strict';\nvar $export = require('./_export');\nvar context = require('./_string-context');\nvar INCLUDES = 'includes';\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(INCLUDES), 'String', {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~context(this, searchString, INCLUDES)\n      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"rubic-cube\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('div',{staticClass:\"cube-wrapper\"},[_c('cube')],1)]),_c('el-col',{attrs:{\"span\":12}},[_vm._m(0)])],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"comment\"},[_c('list-comment',{attrs:{\"title\":\"操作说明:\",\"data\":_vm.comment}})],1)}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"cube\",staticClass:\"cube\",on:{\"mousedown\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.mouseDown($event)},\"mousemove\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.mouseMove($event)},\"mouseup\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.mouseUp($event)}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import _Object$defineProperty from \"../../core-js/object/define-property\";\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n\n    _Object$defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","// requestAnimationFrame兼容性处理\nexport const requestAnimFrame = (function () {\n  return window.requestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    window.webkitRequestAnimationFrame\n})()\n","import {\n  CubeGeometry,\n  MeshBasicMaterial,\n  Mesh,\n  Vector3,\n  Quaternion\n} from 'three'\nimport { requestAnimFrame } from '@/common/js/requestAnimFrame'\n\nfunction rotationAroundWorldX (obj, rad) {\n  // 绕魔方x轴旋转\n  const y0 = obj.position.y\n  const z0 = obj.position.z\n  const q = new Quaternion()\n  q.setFromAxisAngle(new Vector3(1, 0, 0), rad)\n  obj.quaternion.premultiply(q)\n  obj.position.y = Math.cos(rad) * y0 - Math.sin(rad) * z0\n  obj.position.z = Math.cos(rad) * z0 + Math.sin(rad) * y0\n}\n\nfunction rotationAroundWorldY (obj, rad) {\n  // 绕魔方y轴旋转\n  const x0 = obj.position.x\n  const z0 = obj.position.z\n  const q = new Quaternion()\n  q.setFromAxisAngle(new Vector3(0, 1, 0), rad)\n  obj.quaternion.premultiply(q)\n  obj.position.x = Math.cos(rad) * x0 + Math.sin(rad) * z0\n  obj.position.z = Math.cos(rad) * z0 - Math.sin(rad) * x0\n}\n\nfunction rotationAroundWorldZ (obj, rad) {\n  // 绕魔方z轴旋转\n  const x0 = obj.position.x\n  const y0 = obj.position.y\n  const q = new Quaternion()\n  q.setFromAxisAngle(new Vector3(0, 0, 1), rad)\n  obj.quaternion.premultiply(q)\n  obj.position.x = Math.cos(rad) * x0 - Math.sin(rad) * y0\n  obj.position.y = Math.cos(rad) * y0 + Math.sin(rad) * x0\n}\n\nclass Rotation {\n  constructor (cornerBlocks, edgeBlocks, centerBlock, axis, directionSign) {\n    /*\n    cornerBlocks: 角块，按顺时针方向排列\n    edgeBlocks: 边块，按顺时针方向排列\n    centerBlock: 中心块\n    axis: 'x' || 'y' || 'z'\n    directionSign: 1:正向，-1:逆向 (右手坐标系)\n     */\n    this.cornerBlocks = cornerBlocks\n    this.edgeBlocks = edgeBlocks\n    this.centerBlock = centerBlock\n    this.axis = axis\n    this.blocks = cornerBlocks.concat(edgeBlocks, [centerBlock])\n    this.sign = directionSign\n    this.rotationFunc =\n      axis === 'x'\n        ? rotationAroundWorldX\n        : axis === 'y'\n          ? rotationAroundWorldY\n          : rotationAroundWorldZ\n  }\n\n  move (obj, rad) {\n    // 转动过程中执行\n    return this.rotationFunc(obj, rad * this.sign)\n  }\n\n  adjustBlockStatus (blockStatus, actionFactor) {\n    // 每次转动完成后执行\n    // actionFactor:  1, -1, 2\n    if (actionFactor !== 1 && actionFactor !== -1 && actionFactor !== 2) {\n      console.error('actionFactor must be 1, -1 or 2')\n    }\n    let originIndexes = this.cornerBlocks.map(block => blockStatus.indexOf(block))\n    this.cornerBlocks.forEach((block, index) => {\n      blockStatus[originIndexes[index]] = this.cornerBlocks[(index + actionFactor + this.cornerBlocks.length) % this.cornerBlocks.length]\n    })\n\n    originIndexes = this.edgeBlocks.map(block => blockStatus.indexOf(block))\n    this.edgeBlocks.forEach((block, index) => {\n      blockStatus[originIndexes[index]] = this.edgeBlocks[(index + actionFactor + this.edgeBlocks.length) % this.edgeBlocks.length]\n    })\n  }\n}\n\nconst cornerBlocks = {\n  r: ['ruf', 'rub', 'rdb', 'rdf'],\n  l: ['luf', 'ldf', 'ldb', 'lub'],\n  u: ['luf', 'lub', 'rub', 'ruf'],\n  d: ['ldf', 'rdf', 'rdb', 'ldb'],\n  f: ['luf', 'ruf', 'rdf', 'ldf'],\n  b: ['rub', 'lub', 'ldb', 'rdb'],\n  cr: ['uf', 'ub', 'db', 'df'],\n  cu: ['lf', 'lb', 'rb', 'rf'],\n  cf: ['lu', 'ru', 'rd', 'ld']\n}\n\nconst edgeBlocks = {\n  r: ['ru', 'rb', 'rd', 'rf'],\n  l: ['lu', 'lf', 'ld', 'lb'],\n  u: ['uf', 'lu', 'ub', 'ru'],\n  d: ['df', 'rd', 'db', 'ld'],\n  f: ['uf', 'rf', 'df', 'lf'],\n  b: ['ub', 'lb', 'db', 'rb'],\n  cr: ['u', 'b', 'd', 'f'],\n  cu: ['f', 'l', 'b', 'r'],\n  cf: ['u', 'r', 'd', 'l']\n}\n\nconst RotationR = new Rotation(cornerBlocks.r, edgeBlocks.r, 'r', 'x', -1)\nconst RotationL = new Rotation(cornerBlocks.l, edgeBlocks.l, 'l', 'x', 1)\nconst RotationU = new Rotation(cornerBlocks.u, edgeBlocks.u, 'u', 'y', -1)\nconst RotationD = new Rotation(cornerBlocks.d, edgeBlocks.d, 'd', 'y', 1)\nconst RotationF = new Rotation(cornerBlocks.f, edgeBlocks.f, 'f', 'z', -1)\nconst RotationB = new Rotation(cornerBlocks.b, edgeBlocks.b, 'b', 'z', 1)\nconst RotationCR = new Rotation(cornerBlocks.cr, edgeBlocks.cr, 'c', 'x', -1) // R方向中层\nconst RotationCU = new Rotation(cornerBlocks.cu, edgeBlocks.cu, 'c', 'y', -1) // U方向中层\nconst RotationCF = new Rotation(cornerBlocks.cf, edgeBlocks.cf, 'c', 'z', -1) // F方向中层\n\n/*\n采用国际通用魔方公式记号：\nR,L,U,D,F,B: 分别表示右(right),左(left),上(upper),下(down),前(front),后(back)\n大写表示一层，小写表示两层(加中间层)\n默认面向该面以顺时针转动90度，加'(这里用_)表示逆时针转动90度，加2表示转动180度\nx,y,z: 分别以R, U, F方向整体转动，规则同上\n比如：\nR: 右层顺时针转动90度\nD'(这里用D_): 下层逆时针转动90度\nb2: 后两层转动180度\ny'(这里用y_): 整体沿U方向逆时针转动90度\nRotation对象中包含以上转动的所有顺时针转动，逆时针和180度转动通过actionFactor控制\n */\nconst Rotations = {\n  R: RotationR,\n  L: RotationL,\n  U: RotationU,\n  D: RotationD,\n  F: RotationF,\n  B: RotationB,\n  CR: RotationCR,\n  CU: RotationCU,\n  CF: RotationCF,\n  r: {\n    rotations: [RotationR, RotationCR],\n    factors: [1, 1]\n  },\n  l: {\n    rotations: [RotationL, RotationCR],\n    factors: [1, -1]\n  },\n  u: {\n    rotations: [RotationU, RotationCU],\n    factors: [1, 1]\n  },\n  d: {\n    rotations: [RotationD, RotationCU],\n    factors: [1, -1]\n  },\n  f: {\n    rotations: [RotationF, RotationCF],\n    factors: [1, 1]\n  },\n  b: {\n    rotations: [RotationB, RotationCF],\n    factors: [1, -1]\n  },\n  X: {\n    rotations: [RotationR, RotationCR, RotationL],\n    factors: [1, 1, -1]\n  },\n  Y: {\n    rotations: [RotationU, RotationCU, RotationD],\n    factors: [1, 1, -1]\n  },\n  Z: {\n    rotations: [RotationF, RotationCF, RotationB],\n    factors: [1, 1, -1]\n  }\n}\n\nexport default class RubicCube {\n  constructor (blockCenterDis, blockSize, actionTime) {\n    this.blockCenterDis = blockCenterDis // 两个块中心间距离\n    this.blockSize = blockSize // 块边长\n    this.actionTime = actionTime // 每个action的默认时长\n    this.blockStatus = [\n      'luf', 'uf', 'ruf', 'lu', 'u', 'ru', 'lub', 'ub', 'rub',\n      'lf', 'f', 'rf', 'l', 'c', 'r', 'lb', 'b', 'rb',\n      'ldf', 'df', 'rdf', 'ld', 'd', 'rd', 'ldb', 'db', 'rdb'\n    ] // 初始状态\n    this.cube = this.initCube()\n    this.rotating = false\n    this.actions = []\n    this.registerActions()\n  }\n\n  initCube () {\n    // 初始化，创建魔方几何体和网格\n    const group = new Mesh()\n    // 标准配色：上白下黄左绿右蓝前红后橙\n    const meshFace = {\n      down: new MeshBasicMaterial({ color: 0xfffa54 }), // yellow\n      upper: new MeshBasicMaterial({ color: 0xffffff }), // white\n      back: new MeshBasicMaterial({ color: 0xe76a2c }), // orange\n      front: new MeshBasicMaterial({ color: 0x861c11 }), // red\n      right: new MeshBasicMaterial({ color: 0x002cf5 }), // blue\n      left: new MeshBasicMaterial({ color: 0x43912a }), // green\n      inside: new MeshBasicMaterial({ color: 0xcccccc }) // gray\n    }\n    for (let i = 0; i < 3; i++) {\n      for (let j = 0; j < 3; j++) {\n        for (let k = 0; k < 3; k++) {\n          const index = i * 9 + j * 3 + k\n          const status = this.blockStatus[index]\n          const cubeGeom = new CubeGeometry(this.blockSize, this.blockSize, this.blockSize)\n          const mats = []\n          mats.push(status.includes('r') ? meshFace.right : meshFace.inside)\n          mats.push(status.includes('l') ? meshFace.left : meshFace.inside)\n          mats.push(status.includes('u') ? meshFace.upper : meshFace.inside)\n          mats.push(status.includes('d') ? meshFace.down : meshFace.inside)\n          mats.push(status.includes('f') ? meshFace.front : meshFace.inside)\n          mats.push(status.includes('b') ? meshFace.back : meshFace.inside)\n          const cube = new Mesh(cubeGeom, mats)\n          cube.translateX((k % 3 - 1) * this.blockCenterDis)\n          cube.translateY((1 - i % 3) * this.blockCenterDis)\n          cube.translateZ((1 - j % 3) * this.blockCenterDis)\n          group.add(cube)\n        }\n      }\n    }\n    return group\n  }\n\n  bindScene (scene) {\n    scene.add(this.cube)\n  }\n\n  unbindScene (scene) {\n    scene.remove(this.cube)\n  }\n\n  basicMove (rotation, actionFactor, callback, actionTime = this.actionTime, newAction = true) {\n    // 执行一次action\n    // rotation: class Rotation\n    // actionFactor: 1, -1, 2分别对应顺时针90度，逆时针90度，180度\n    // rotation: array(Rotation) or Rotation\n    if (rotation instanceof Rotation) {\n      rotation = [rotation]\n      actionFactor = [actionFactor]\n    }\n    if (newAction) {\n      this.actions.push({\n        rotation,\n        actionFactor,\n        callback,\n        actionTime\n      })\n    }\n    if (this.rotating) {\n      return\n    }\n    const that = this\n    this.rotating = true\n    const startTime = Date.now()\n    let lastTime = startTime\n\n    // search the blocks to rotate\n    const rotateBlocks = new Array(rotation.length).fill(null).map(() => [])\n    this.blockStatus.forEach((block, index) => {\n      rotation.forEach((r, ind) => {\n        if (r.blocks.includes(block)) {\n          rotateBlocks[ind].push(this.cube.children[index])\n        }\n      })\n    })\n\n    function render () {\n      if (lastTime >= startTime + actionTime) {\n        // 执行完毕，改变魔方状态\n        rotation.forEach((r, ind) => {\n          r.adjustBlockStatus(that.blockStatus, actionFactor[ind])\n        })\n        that.rotating = false\n        that.actions.splice(0, 1)\n        if (that.actions.length > 0) {\n          // 执行队列中后续action\n          let { rotation, actionFactor, callback, actionTime } = that.actions[0]\n          that.basicMove(rotation, actionFactor, callback, actionTime, false)\n        }\n        return\n      }\n      let nowTime = Date.now()\n      if (nowTime >= startTime + actionTime) {\n        nowTime = startTime + actionTime\n      }\n\n      rotateBlocks.forEach((blocks, ind) => {\n        const angle = Math.PI / 2 * (nowTime - lastTime) / actionTime * actionFactor[ind]\n        blocks.forEach(block => {\n          rotation[ind].move(block, angle)\n        })\n      })\n      lastTime = nowTime\n      callback()\n      requestAnimFrame(render)\n    }\n\n    render()\n  }\n\n  rotate (axis, angle) {\n    this.cube.rotateOnWorldAxis(axis, angle)\n  }\n\n  registerActions () {\n    const that = this\n    ;['R', 'L', 'U', 'D', 'F', 'B'].forEach(key => {\n      this[`move${key}`] = function (callback, actionTime = that.actionTime) {\n        that.basicMove(Rotations[key], 1, callback, actionTime)\n      }\n      this[`move${key}_`] = function (callback, actionTime = that.actionTime) {\n        that.basicMove(Rotations[key], -1, callback, actionTime)\n      }\n      this[`move${key}2`] = function (callback, actionTime = that.actionTime) {\n        that.basicMove(Rotations[key], 2, callback, actionTime)\n      }\n    })\n    ;['r', 'l', 'u', 'd', 'f', 'b', 'X', 'Y', 'Z'].forEach(key => {\n      this[`move${key}`] = function (callback, actionTime = that.actionTime) {\n        that.basicMove(\n          Rotations[key].rotations,\n          Rotations[key].factors,\n          callback,\n          actionTime\n        )\n      }\n      this[`move${key}_`] = function (callback, actionTime = that.actionTime) {\n        that.basicMove(\n          Rotations[key].rotations,\n          Rotations[key].factors.map(factor => -1 * factor),\n          callback,\n          actionTime\n        )\n      }\n      this[`move${key}2`] = function (callback, actionTime = that.actionTime) {\n        that.basicMove(\n          Rotations[key].rotations,\n          Rotations[key].factors.map(factor => 2 * factor),\n          callback,\n          actionTime\n        )\n      }\n    })\n  }\n}\n","<template>\n  <div class=\"cube\"\n       ref=\"cube\"\n       @mousedown.prevent.stop=\"mouseDown\"\n       @mousemove.prevent.stop=\"mouseMove\"\n       @mouseup.prevent.stop=\"mouseUp\"></div>\n</template>\n\n<script>\nimport {\n  Scene,\n  PerspectiveCamera,\n  WebGLRenderer,\n  AmbientLight,\n  SpotLight,\n  Object3D,\n  Vector3,\n  Euler\n} from 'three'\nimport RubicCube from './cube.js'\n\nexport default {\n  name: 'cube',\n  data () {\n    return {\n      width: 600,\n      height: 600,\n      moveTime: 1000,\n      updating: false,\n      dragging: false,\n      moving: false,\n      lastX: -1,\n      lastY: -1\n    }\n  },\n  mounted () {\n    this.$nextTick(() => {\n      this.initScene()\n    })\n    this.registerKeyEvents()\n    this.registerMove()\n  },\n  methods: {\n    reset () {\n      // reset cube status\n      this.rubicCube.unbindScene(this.scene)\n      this.rubicCube = new RubicCube(3, 2.8, this.moveTime)\n      this.rubicCube.bindScene(this.scene)\n      this.rubicCube.rotate(new Vector3(1, 0, 0), 0.3)\n      this.rubicCube.rotate(new Vector3(0, 1, 0), -0.3)\n      this.updateView()\n    },\n    registerKeyEvents () {\n      window.document.onkeydown = event => {\n        if (['KeyR', 'KeyL', 'KeyF', 'KeyB', 'KeyU', 'KeyD', 'KeyX', 'KeyY', 'KeyZ'].includes(event.code)) {\n          this.move(event.code.slice(-1), event.shiftKey, event.ctrlKey)\n        } else if (event.code === 'KeyI') {\n          this.reset()\n        }\n      }\n    },\n    registerMove () {\n      ['R', 'L', 'U', 'D', 'F', 'B', 'X', 'Y', 'Z', 'r', 'l', 'u', 'd', 'f', 'b'].forEach(key => {\n        this[`move${key}`] = reverse => {\n          reverse\n            ? this.rubicCube[`move${key}_`](this.updateView, this.moveTime)\n            : this.rubicCube[`move${key}`](this.updateView, this.moveTime)\n        }\n      })\n    },\n    move (tag, reverse, ctrlKey) {\n      if (!(tag in ['X', 'Y', 'Z']) && ctrlKey) {\n        tag = tag.toLowerCase()\n      }\n      this[`move${tag}`](reverse)\n    },\n    initScene () {\n      // 创建场景，摄像机，渲染器，设置画布背景色和尺寸\n      this.scene = new Scene()\n      this.camera = new PerspectiveCamera(45, this.width / this.height, 1, 1000)\n      this.camera.position.set(0, 0, 25)\n      this.renderer = new WebGLRenderer()\n      this.renderer.setClearColor('#E9EEF3')\n      this.renderer.setSize(this.width, this.height)\n      this.$refs.cube.append(this.renderer.domElement)\n\n      // 创建魔方\n      this.rubicCube = new RubicCube(3, 2.8, this.moveTime)\n      this.rubicCube.bindScene(this.scene)\n\n      // 添加灯光效果\n      this.ambientLight = new AmbientLight('#ffffff') // 漫反射光源\n      this.spotLight = this.getSpotLight() // 聚光灯光源\n      this.scene.add(this.ambientLight)\n      this.scene.add(this.spotLight)\n\n      this.rubicCube.rotate(new Vector3(1, 0, 0), 0.3)\n      this.rubicCube.rotate(new Vector3(0, 1, 0), -0.3)\n      this.updateView()\n    },\n    getSpotLight () {\n      // spotlight\n      const pointColor = '#ffffff'\n      const spotLight = new SpotLight(pointColor)\n      spotLight.position.set(0, 5, 20)\n      spotLight.target = new Object3D() // target to the origin point\n      return spotLight\n    },\n    updateView () {\n      if (this.updating) {\n        return\n      }\n      this.updating = true\n      this.renderer.render(this.scene, this.camera)\n      this.$nextTick(() => {\n        this.updating = false\n      })\n    },\n    // 处理鼠标事件\n    mouseDown (ev) {\n      const x = ev.clientX\n      const y = ev.clientY\n      const rect = ev.target.getBoundingClientRect()\n      if (rect.left <= x && x < rect.right && rect.top <= y && y < rect.bottom) {\n        this.lastX = x\n        this.lastY = y\n        this.dragging = true\n      }\n    },\n    mouseMove (ev) {\n      if (this.lastX < 0) {\n        return\n      }\n      const x = ev.clientX\n      const y = ev.clientY\n      if (ev.buttons !== 1) {\n        return\n      }\n      const factor = 100 / 60000\n      const dx = factor * (x - this.lastX)\n      const dy = factor * (y - this.lastY)\n      this.lastX = x\n      this.lastY = y\n      this.rubicCube.rotate(new Vector3(1, 0, 0), dy)\n      this.rubicCube.rotate(new Vector3(0, 1, 0), dx)\n      const resRotation = this.rubicCube.cube.rotation\n      // restrict rotation view to avoid actions using mouse\n      // should not do the following, check api of three.js in future\n      const rx = Math.max(Math.min(resRotation._x, Math.PI / 6), -Math.PI / 6)\n      const ry = Math.max(Math.min(resRotation._y, Math.PI / 6), -Math.PI / 6)\n      const rz = Math.max(Math.min(resRotation._z, Math.PI / 6), -Math.PI / 6)\n      this.rubicCube.cube.setRotationFromEuler(new Euler(rx, ry, rz))\n      this.updateView()\n    },\n    mouseUp () {\n      if (this.lastX < 0) {\n        this.dragging = false\n        return\n      }\n      if (this.dragging) {\n        this.updateView()\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"stylus\">\n  .cube\n    width: 100%\n    height: 100%\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cube.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cube.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./cube.vue?vue&type=template&id=30b93849&scoped=true&\"\nimport script from \"./cube.vue?vue&type=script&lang=js&\"\nexport * from \"./cube.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cube.vue?vue&type=style&index=0&id=30b93849&scoped=true&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"30b93849\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"rubic-cube\">\n    <el-row>\n      <el-col :span=\"12\">\n        <div class=\"cube-wrapper\">\n          <cube></cube>\n        </div>\n      </el-col>\n      <el-col :span=\"12\">\n        <div class=\"comment\" v-once>\n          <list-comment title=\"操作说明:\" :data=\"comment\"></list-comment>\n<!--          <div class=\"more\">-->\n<!--            更多功能开发中。。。-->\n<!--          </div>-->\n        </div>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport ListComment from '@/base/list-comment/list-comment.vue'\nimport Cube from '@/components/cube/cube.vue'\nexport default {\n  name: 'rubic-cube',\n  data () {\n    return {\n      comment: [\n        'R: 右层顺时针转动90度; shift+R: 右层逆时针转动90度',\n        'ctrl+R: 右两层顺时针转动90度; ctrl+shift+R: 右两层逆时针转动90度',\n        'L: 左层顺时针转动90度; shift+L: 左层逆时针转动90度',\n        'ctrl+L: 左两层顺时针转动90度; ctrl+shift+L: 左两层逆时针转动90度',\n        'U: 上层顺时针转动90度; shift+U: 上层逆时针转动90度',\n        'ctrl+U: 上两层顺时针转动90度; ctrl+shift+U: 上两层逆时针转动90度',\n        'D: 下层顺时针转动90度; shift+D: 下层逆时针转动90度',\n        'ctrl+D: 下两层顺时针转动90度; ctrl+shift+D: 下两层逆时针转动90度',\n        'F: 前层顺时针转动90度; shift+F: 前层逆时针转动90度',\n        'ctrl+F: 前两层顺时针转动90度; ctrl+shift+F: 前两层逆时针转动90度',\n        'B: 后层顺时针转动90度; shift+B: 后层逆时针转动90度',\n        'ctrl+B: 后两层顺时针转动90度; ctrl+shift+B: 后两层逆时针转动90度',\n        'X: 整体以R的方向顺时针转动90度; shift+X: 整体以R的方向逆时针转动90度',\n        'Y: 整体以U的方向顺时针转动90度; shift+Y: 整体以U的方向逆时针转动90度',\n        'Z: 整体以F的方向顺时针转动90度; shift+Z: 整体以F的方向逆时针转动90度',\n        'I: 初始化/重置魔方状态',\n        '鼠标拖拽：整体三维旋转'\n      ]\n    }\n  },\n  components: {\n    ListComment,\n    Cube\n  }\n}\n</script>\n\n<style scoped lang=\"stylus\">\n.cube-wrapper\n  width: 600px\n  height: 600px\n.comment\n  margin: 100px auto 0\n  .more\n    margin: 100px auto\n    font-size: 36px\n    font-weight: 500\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rubic-cube.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rubic-cube.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./rubic-cube.vue?vue&type=template&id=03d7c63c&scoped=true&\"\nimport script from \"./rubic-cube.vue?vue&type=script&lang=js&\"\nexport * from \"./rubic-cube.vue?vue&type=script&lang=js&\"\nimport style0 from \"./rubic-cube.vue?vue&type=style&index=0&id=03d7c63c&scoped=true&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"03d7c63c\",\n  null\n  \n)\n\nexport default component.exports","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n","var MATCH = require('./_wks')('match');\nmodule.exports = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n","'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export = require('./_export');\nvar $includes = require('./_array-includes')(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./_add-to-unscopables')('includes');\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rubic-cube.vue?vue&type=style&index=0&id=03d7c63c&scoped=true&lang=stylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rubic-cube.vue?vue&type=style&index=0&id=03d7c63c&scoped=true&lang=stylus&\"","module.exports = require(\"core-js/library/fn/object/define-property\");","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cube.vue?vue&type=style&index=0&id=30b93849&scoped=true&lang=stylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cube.vue?vue&type=style&index=0&id=30b93849&scoped=true&lang=stylus&\"","// 7.2.8 IsRegExp(argument)\nvar isObject = require('./_is-object');\nvar cof = require('./_cof');\nvar MATCH = require('./_wks')('match');\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};\n","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, searchString, NAME) {\n  if (isRegExp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n"],"sourceRoot":""}