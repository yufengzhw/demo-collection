(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed0e9f34"],{"0ee5":function(t,e,n){},"2fdb":function(t,e,n){"use strict";var i=n("5ca1"),o=n("d2c8"),r="includes";i(i.P+i.F*n("5147")(r),"String",{includes:function(t){return!!~o(this,t,r).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"3eeb":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rubic-cube"},[n("el-row",[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"cube-wrapper"},[n("cube")],1)]),n("el-col",{attrs:{span:12}},[t._m(0)])],1)],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment"},[n("list-comment",{attrs:{title:"操作说明:",data:t.comment}})],1)}],r=n("657d"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"cube",staticClass:"cube",on:{mousedown:function(e){return e.preventDefault(),e.stopPropagation(),t.mouseDown(e)},mousemove:function(e){return e.preventDefault(),e.stopPropagation(),t.mouseMove(e)},mouseup:function(e){return e.preventDefault(),e.stopPropagation(),t.mouseUp(e)}}})},s=[],a=(n("ac6a"),n("6762"),n("2fdb"),n("5a89"));n("6c7b");function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=n("85f2"),h=n.n(f);function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),h()(t,i.key,i)}}function d(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}var b=function(){return window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.webkitRequestAnimationFrame}();function v(t,e){var n=t.position.y,i=t.position.z,o=new a["k"];o.setFromAxisAngle(new a["o"](1,0,0),e),t.quaternion.premultiply(o),t.position.y=Math.cos(e)*n-Math.sin(e)*i,t.position.z=Math.cos(e)*i+Math.sin(e)*n}function m(t,e){var n=t.position.x,i=t.position.z,o=new a["k"];o.setFromAxisAngle(new a["o"](0,1,0),e),t.quaternion.premultiply(o),t.position.x=Math.cos(e)*n+Math.sin(e)*i,t.position.z=Math.cos(e)*i-Math.sin(e)*n}function p(t,e){var n=t.position.x,i=t.position.y,o=new a["k"];o.setFromAxisAngle(new a["o"](0,0,1),e),t.quaternion.premultiply(o),t.position.x=Math.cos(e)*n-Math.sin(e)*i,t.position.y=Math.cos(e)*i+Math.sin(e)*n}var w=function(){function t(e,n,i,o,r){u(this,t),this.cornerBlocks=e,this.edgeBlocks=n,this.centerBlock=i,this.axis=o,this.blocks=e.concat(n,[i]),this.sign=r,this.rotationFunc="x"===o?v:"y"===o?m:p}return d(t,[{key:"move",value:function(t,e){return this.rotationFunc(t,e*this.sign)}},{key:"adjustBlockStatus",value:function(t,e){var n=this;1!==e&&-1!==e&&2!==e&&console.error("actionFactor must be 1, -1 or 2");var i=this.cornerBlocks.map((function(e){return t.indexOf(e)}));this.cornerBlocks.forEach((function(o,r){t[i[r]]=n.cornerBlocks[(r+e+n.cornerBlocks.length)%n.cornerBlocks.length]})),i=this.edgeBlocks.map((function(e){return t.indexOf(e)})),this.edgeBlocks.forEach((function(o,r){t[i[r]]=n.edgeBlocks[(r+e+n.edgeBlocks.length)%n.edgeBlocks.length]}))}}]),t}(),g={r:["ruf","rub","rdb","rdf"],l:["luf","ldf","ldb","lub"],u:["luf","lub","rub","ruf"],d:["ldf","rdf","rdb","ldb"],f:["luf","ruf","rdf","ldf"],b:["rub","lub","ldb","rdb"],cr:["uf","ub","db","df"],cu:["lf","lb","rb","rf"],cf:["lu","ru","rd","ld"]},k={r:["ru","rb","rd","rf"],l:["lu","lf","ld","lb"],u:["uf","lu","ub","ru"],d:["df","rd","db","ld"],f:["uf","rf","df","lf"],b:["ub","lb","db","rb"],cr:["u","b","d","f"],cu:["f","l","b","r"],cf:["u","r","d","l"]},y=new w(g.r,k.r,"r","x",-1),M=new w(g.l,k.l,"l","x",1),C=new w(g.u,k.u,"u","y",-1),x=new w(g.d,k.d,"d","y",1),F=new w(g.f,k.f,"f","z",-1),B=new w(g.b,k.b,"b","z",1),S=new w(g.cr,k.cr,"c","x",-1),E=new w(g.cu,k.cu,"c","y",-1),D=new w(g.cf,k.cf,"c","z",-1),T={R:y,L:M,U:C,D:x,F:F,B:B,CR:S,CU:E,CF:D,r:{rotations:[y,S],factors:[1,1]},l:{rotations:[M,S],factors:[1,-1]},u:{rotations:[C,E],factors:[1,1]},d:{rotations:[x,E],factors:[1,-1]},f:{rotations:[F,D],factors:[1,1]},b:{rotations:[B,D],factors:[1,-1]},X:{rotations:[y,S,M],factors:[1,1,-1]},Y:{rotations:[C,E,x],factors:[1,1,-1]},Z:{rotations:[F,D,B],factors:[1,1,-1]}},R=function(){function t(e,n,i){u(this,t),this.blockCenterDis=e,this.blockSize=n,this.actionTime=i,this.blockStatus=["luf","uf","ruf","lu","u","ru","lub","ub","rub","lf","f","rf","l","c","r","lb","b","rb","ldf","df","rdf","ld","d","rd","ldb","db","rdb"],this.cube=this.initCube(),this.rotating=!1,this.actions=[],this.registerActions()}return d(t,[{key:"initCube",value:function(){for(var t=new a["g"],e={down:new a["h"]({color:16775764}),upper:new a["h"]({color:16777215}),back:new a["h"]({color:15165996}),front:new a["h"]({color:8789009}),right:new a["h"]({color:11509}),left:new a["h"]({color:4428074}),inside:new a["h"]({color:13421772})},n=0;n<3;n++)for(var i=0;i<3;i++)for(var o=0;o<3;o++){var r=9*n+3*i+o,c=this.blockStatus[r],s=new a["e"](this.blockSize,this.blockSize,this.blockSize),u=[];u.push(c.includes("r")?e.right:e.inside),u.push(c.includes("l")?e.left:e.inside),u.push(c.includes("u")?e.upper:e.inside),u.push(c.includes("d")?e.down:e.inside),u.push(c.includes("f")?e.front:e.inside),u.push(c.includes("b")?e.back:e.inside);var f=new a["g"](s,u);f.translateX((o%3-1)*this.blockCenterDis),f.translateY((1-n%3)*this.blockCenterDis),f.translateZ((1-i%3)*this.blockCenterDis),t.add(f)}return t}},{key:"bindScene",value:function(t){t.add(this.cube)}},{key:"unbindScene",value:function(t){t.remove(this.cube)}},{key:"basicMove",value:function(t,e,n){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.actionTime,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(t instanceof w&&(t=[t],e=[e]),r&&this.actions.push({rotation:t,actionFactor:e,callback:n,actionTime:o}),!this.rotating){var c=this;this.rotating=!0;var s=Date.now(),a=s,u=new Array(t.length).fill(null).map((function(){return[]}));this.blockStatus.forEach((function(e,n){t.forEach((function(t,o){t.blocks.includes(e)&&u[o].push(i.cube.children[n])}))})),f()}function f(){if(a>=s+o){if(t.forEach((function(t,n){t.adjustBlockStatus(c.blockStatus,e[n])})),c.rotating=!1,c.actions.splice(0,1),c.actions.length>0){var i=c.actions[0],r=i.rotation,h=i.actionFactor,l=i.callback,d=i.actionTime;c.basicMove(r,h,l,d,!1)}}else{var v=Date.now();v>=s+o&&(v=s+o),u.forEach((function(n,i){var r=Math.PI/2*(v-a)/o*e[i];n.forEach((function(e){t[i].move(e,r)}))})),a=v,n(),b(f)}}}},{key:"rotate",value:function(t,e){this.cube.rotateOnWorldAxis(t,e)}},{key:"registerActions",value:function(){var t=this,e=this;["R","L","U","D","F","B"].forEach((function(n){t["move".concat(n)]=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.actionTime;e.basicMove(T[n],1,t,i)},t["move".concat(n,"_")]=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.actionTime;e.basicMove(T[n],-1,t,i)},t["move".concat(n,"2")]=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.actionTime;e.basicMove(T[n],2,t,i)}})),["r","l","u","d","f","b","X","Y","Z"].forEach((function(n){t["move".concat(n)]=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.actionTime;e.basicMove(T[n].rotations,T[n].factors,t,i)},t["move".concat(n,"_")]=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.actionTime;e.basicMove(T[n].rotations,T[n].factors.map((function(t){return-1*t})),t,i)},t["move".concat(n,"2")]=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.actionTime;e.basicMove(T[n].rotations,T[n].factors.map((function(t){return 2*t})),t,i)}}))}}]),t}(),A={name:"cube",data:function(){return{width:600,height:600,moveTime:1e3,updating:!1,dragging:!1,moving:!1,lastX:-1,lastY:-1}},mounted:function(){var t=this;this.$nextTick((function(){t.initScene()})),this.registerKeyEvents(),this.registerMove()},methods:{reset:function(){this.rubicCube.unbindScene(this.scene),this.rubicCube=new R(3,2.8,this.moveTime),this.rubicCube.bindScene(this.scene),this.rubicCube.rotate(new a["o"](1,0,0),.3),this.rubicCube.rotate(new a["o"](0,1,0),-.3),this.updateView()},registerKeyEvents:function(){var t=this;window.document.onkeydown=function(e){["KeyR","KeyL","KeyF","KeyB","KeyU","KeyD","KeyX","KeyY","KeyZ"].includes(e.code)?t.move(e.code.slice(-1),e.shiftKey,e.ctrlKey):"KeyI"===e.code&&t.reset()}},registerMove:function(){var t=this;["R","L","U","D","F","B","X","Y","Z","r","l","u","d","f","b"].forEach((function(e){t["move".concat(e)]=function(n){n?t.rubicCube["move".concat(e,"_")](t.updateView,t.moveTime):t.rubicCube["move".concat(e)](t.updateView,t.moveTime)}}))},move:function(t,e,n){t in["X","Y","Z"]||!n||(t=t.toLowerCase()),this["move".concat(t)](e)},initScene:function(){this.scene=new a["m"],this.camera=new a["j"](45,this.width/this.height,1,1e3),this.camera.position.set(0,0,25),this.renderer=new a["p"],this.renderer.setClearColor("#E9EEF3"),this.renderer.setSize(this.width,this.height),this.$refs.cube.append(this.renderer.domElement),this.rubicCube=new R(3,2.8,this.moveTime),this.rubicCube.bindScene(this.scene),this.ambientLight=new a["a"]("#ffffff"),this.spotLight=this.getSpotLight(),this.scene.add(this.ambientLight),this.scene.add(this.spotLight),this.rubicCube.rotate(new a["o"](1,0,0),.3),this.rubicCube.rotate(new a["o"](0,1,0),-.3),this.updateView()},getSpotLight:function(){var t="#ffffff",e=new a["n"](t);return e.position.set(0,5,20),e.target=new a["i"],e},updateView:function(){var t=this;this.updating||(this.updating=!0,this.renderer.render(this.scene,this.camera),this.$nextTick((function(){t.updating=!1})))},mouseDown:function(t){var e=t.clientX,n=t.clientY,i=t.target.getBoundingClientRect();i.left<=e&&e<i.right&&i.top<=n&&n<i.bottom&&(this.lastX=e,this.lastY=n,this.dragging=!0)},mouseMove:function(t){if(!(this.lastX<0)){var e=t.clientX,n=t.clientY;if(1===t.buttons){var i=100/6e4,o=i*(e-this.lastX),r=i*(n-this.lastY);this.lastX=e,this.lastY=n,this.rubicCube.rotate(new a["o"](1,0,0),r),this.rubicCube.rotate(new a["o"](0,1,0),o);var c=this.rubicCube.cube.rotation,s=Math.max(Math.min(c._x,Math.PI/6),-Math.PI/6),u=Math.max(Math.min(c._y,Math.PI/6),-Math.PI/6),f=Math.max(Math.min(c._z,Math.PI/6),-Math.PI/6);this.rubicCube.cube.setRotationFromEuler(new a["f"](s,u,f)),this.updateView()}}},mouseUp:function(){this.lastX<0?this.dragging=!1:this.dragging&&this.updateView()}}},L=A,X=(n("8777"),n("2877")),z=Object(X["a"])(L,c,s,!1,null,"30b93849",null),K=z.exports,P={name:"rubic-cube",data:function(){return{comment:["R: 右层顺时针转动90度; shift+R: 右层逆时针转动90度","ctrl+R: 右两层顺时针转动90度; ctrl+shift+R: 右两层逆时针转动90度","L: 左层顺时针转动90度; shift+L: 左层逆时针转动90度","ctrl+L: 左两层顺时针转动90度; ctrl+shift+L: 左两层逆时针转动90度","U: 上层顺时针转动90度; shift+U: 上层逆时针转动90度","ctrl+U: 上两层顺时针转动90度; ctrl+shift+U: 上两层逆时针转动90度","D: 下层顺时针转动90度; shift+D: 下层逆时针转动90度","ctrl+D: 下两层顺时针转动90度; ctrl+shift+D: 下两层逆时针转动90度","F: 前层顺时针转动90度; shift+F: 前层逆时针转动90度","ctrl+F: 前两层顺时针转动90度; ctrl+shift+F: 前两层逆时针转动90度","B: 后层顺时针转动90度; shift+B: 后层逆时针转动90度","ctrl+B: 后两层顺时针转动90度; ctrl+shift+B: 后两层逆时针转动90度","X: 整体以R的方向顺时针转动90度; shift+X: 整体以R的方向逆时针转动90度","Y: 整体以U的方向顺时针转动90度; shift+Y: 整体以U的方向逆时针转动90度","Z: 整体以F的方向顺时针转动90度; shift+Z: 整体以F的方向逆时针转动90度","I: 初始化/重置魔方状态","鼠标拖拽：整体三维旋转"]}},components:{ListComment:r["a"],Cube:K}},Y=P,U=(n("73fe"),Object(X["a"])(Y,i,o,!1,null,"03d7c63c",null));e["default"]=U.exports},"454f":function(t,e,n){n("46a7");var i=n("584a").Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},"46a7":function(t,e,n){var i=n("63b6");i(i.S+i.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},5147:function(t,e,n){var i=n("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,!"/./"[t](e)}catch(o){}}return!0}},6762:function(t,e,n){"use strict";var i=n("5ca1"),o=n("c366")(!0);i(i.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},"73fe":function(t,e,n){"use strict";var i=n("ae1b"),o=n.n(i);o.a},"85f2":function(t,e,n){t.exports=n("454f")},8777:function(t,e,n){"use strict";var i=n("0ee5"),o=n.n(i);o.a},aae3:function(t,e,n){var i=n("d3f4"),o=n("2d95"),r=n("2b4c")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==o(t))}},ae1b:function(t,e,n){},d2c8:function(t,e,n){var i=n("aae3"),o=n("be13");t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(t))}}}]);
//# sourceMappingURL=chunk-ed0e9f34.6fe3bfee.js.map