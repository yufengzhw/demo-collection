(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d2546e9"],{"2fdb":function(t,e,i){"use strict";var n=i("5ca1"),o=i("d2c8"),r="includes";n(n.P+n.F*i("5147")(r),"String",{includes:function(t){return!!~o(this,t,r).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"3eeb":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rubic-cube"},[i("el-row",[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"cube-wrapper"},[i("cube")],1)]),i("el-col",{attrs:{span:12}},[i("div",{staticClass:"comment"},[i("p",{staticClass:"title"},[t._v("操作说明:")]),i("ul",[i("li",[t._v("R: 右层顺时针转动90度   shift+R: 右层逆时针转动90度")]),i("li",[t._v("L: 左层顺时针转动90度   shift+L: 左层逆时针转动90度")]),i("li",[t._v("U: 上层顺时针转动90度   shift+U: 上层逆时针转动90度")]),i("li",[t._v("D: 下层顺时针转动90度   shift+D: 下层逆时针转动90度")]),i("li",[t._v("F: 前层顺时针转动90度   shift+F: 前层逆时针转动90度")]),i("li",[t._v("B: 后层顺时针转动90度   shift+B: 后层逆时针转动90度")]),i("li",[t._v("鼠标拖拽：整体三维旋转")])]),i("div",{staticClass:"more"},[t._v("\n          更多功能开发中。。。\n        ")])])])],1)],1)},o=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"cube",staticClass:"cube",on:{mousedown:function(e){return e.preventDefault(),e.stopPropagation(),t.mouseDown(e)},mousemove:function(e){return e.preventDefault(),e.stopPropagation(),t.mouseMove(e)},mouseup:function(e){return e.preventDefault(),e.stopPropagation(),t.mouseUp(e)}}})},s=[],c=(i("ac6a"),i("6762"),i("2fdb"),i("5a89"));function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=i("85f2"),l=i.n(u);function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),l()(t,n.key,n)}}function h(t,e,i){return e&&f(t.prototype,e),i&&f(t,i),t}function d(t,e){var i=t.position.y,n=t.position.z,o=new c["j"];o.setFromAxisAngle(new c["n"](1,0,0),e),t.quaternion.premultiply(o),t.position.y=Math.cos(e)*i-Math.sin(e)*n,t.position.z=Math.cos(e)*n+Math.sin(e)*i}function b(t,e){var i=t.position.x,n=t.position.z,o=new c["j"];o.setFromAxisAngle(new c["n"](0,1,0),e),t.quaternion.premultiply(o),t.position.x=Math.cos(e)*i+Math.sin(e)*n,t.position.z=Math.cos(e)*n-Math.sin(e)*i}function v(t,e){var i=t.position.x,n=t.position.y,o=new c["j"];o.setFromAxisAngle(new c["n"](0,0,1),e),t.quaternion.premultiply(o),t.position.x=Math.cos(e)*i-Math.sin(e)*n,t.position.y=Math.cos(e)*n+Math.sin(e)*i}var p=function(){function t(e,i,n,o,r){a(this,t),this.cornerBlocks=e,this.edgeBlocks=i,this.centerBlock=n,this.axis=o,this.blocks=e.concat(i,[n]),this.sign=r,this.rotationFunc="x"===o?d:"y"===o?b:v}return h(t,[{key:"move",value:function(t,e){return this.rotationFunc(t,e*this.sign)}},{key:"adjustBlockStatus",value:function(t,e){var i=this;1!==e&&-1!==e&&2!==e&&console.error("actionFactor must be 1, -1 or 2");var n=this.cornerBlocks.map((function(e){return t.indexOf(e)}));this.cornerBlocks.forEach((function(o,r){t[n[r]]=i.cornerBlocks[(r+e+i.cornerBlocks.length)%i.cornerBlocks.length]})),n=this.edgeBlocks.map((function(e){return t.indexOf(e)})),this.edgeBlocks.forEach((function(o,r){t[n[r]]=i.edgeBlocks[(r+e+i.edgeBlocks.length)%i.edgeBlocks.length]}))}}]),t}(),g={r:["ruf","rub","rdb","rdf"],l:["luf","ldf","ldb","lub"],u:["luf","lub","rub","ruf"],d:["ldf","rdf","rdb","ldb"],f:["luf","ruf","rdf","ldf"],b:["rub","lub","ldb","rdb"],cr:["uf","ub","db","df"],cu:["lf","lb","rb","rf"],cf:["lu","ru","rd","ld"]},m={r:["ru","rb","rd","rf"],l:["lu","lf","ld","lb"],u:["uf","lu","ub","ru"],d:["df","rd","db","ld"],f:["uf","rf","df","lf"],b:["ub","lb","db","rb"],cr:["u","b","d","f"],cu:["f","l","b","r"],cf:["u","r","d","l"]},w=new p(g.r,m.r,"r","x",-1),S=new p(g.l,m.l,"l","x",1),y=new p(g.u,m.u,"u","y",-1),k=new p(g.d,m.d,"d","y",1),L=new p(g.f,m.f,"f","z",-1),C=new p(g.b,m.b,"b","z",1),M=new p(g.cr,m.cr,"c","x",-1),x=new p(g.cu,m.cu,"c","y",-1),T=new p(g.cf,m.cf,"c","z",-1),F={R:w,L:S,U:y,D:k,F:L,B:C,CR:M,CU:x,CF:T},B=function(){function t(e,i,n){a(this,t),this.wrapperSize=e,this.edgeSize=i,this.actionTime=n,this.blockStatus=["luf","uf","ruf","lu","u","ru","lub","ub","rub","lf","f","rf","l","c","r","lb","b","rb","ldf","df","rdf","ld","d","rd","ldb","db","rdb"],this.cube=this.initCube(),this.rotating=!1,this.actions=[],this.registerActions()}return h(t,[{key:"initCube",value:function(){for(var t=new c["f"],e={down:new c["g"]({color:16775764}),upper:new c["g"]({color:16777215}),back:new c["g"]({color:15165996}),front:new c["g"]({color:8789009}),right:new c["g"]({color:11509}),left:new c["g"]({color:4428074}),inside:new c["g"]({color:13421772})},i=0;i<3;i++)for(var n=0;n<3;n++)for(var o=0;o<3;o++){var r=9*i+3*n+o,s=this.blockStatus[r],a=new c["e"](this.edgeSize,this.edgeSize,this.edgeSize),u=[];u.push(s.includes("r")?e.right:e.inside),u.push(s.includes("l")?e.left:e.inside),u.push(s.includes("u")?e.upper:e.inside),u.push(s.includes("d")?e.down:e.inside),u.push(s.includes("f")?e.front:e.inside),u.push(s.includes("b")?e.back:e.inside);var l=new c["f"](a,u);l.translateX((o%3-1)*this.wrapperSize),l.translateY((1-i%3)*this.wrapperSize),l.translateZ((1-n%3)*this.wrapperSize),t.add(l)}return t}},{key:"bindScene",value:function(t){t.add(this.cube)}},{key:"basicMove",value:function(t,e,i){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:requestAnimationFrame,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.actionTime,s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(s&&this.actions.push({rotation:t,actionFactor:e,callback:i,loopFunc:o,actionTime:r}),!this.rotating){var c=this;this.rotating=!0;var a=Date.now(),u=a,l=[];this.blockStatus.forEach((function(e,i){t.blocks.includes(e)&&l.push(n.cube.children[i])})),f()}function f(){if(u>=a+r){if(t.adjustBlockStatus(c.blockStatus,e),c.rotating=!1,c.actions.splice(0,1),c.actions.length>0){var n=c.actions[0],s=n.rotation,h=n.actionFactor,d=n.callback,b=n.loopFunc,v=n.actionTime;c.basicMove(s,h,d,b,v,!1)}}else{var p=Date.now();p>=a+r&&(p=a+r);var g=Math.PI/2*(p-u)/r*e;l.forEach((function(e){t.move(e,g)})),u=p,i(),o(f)}}}},{key:"rotate",value:function(t,e){this.cube.rotateOnWorldAxis(t,e)}},{key:"registerActions",value:function(){var t=this,e=this;["R","L","U","D","F","B"].forEach((function(i){t["move".concat(i)]=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:requestAnimationFrame,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.actionTime;e.basicMove(F[i],1,t,n,o)},t["move".concat(i,"_")]=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:requestAnimationFrame,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.actionTime;e.basicMove(F[i],-1,t,n,o)},t["move".concat(i,"2")]=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:requestAnimationFrame,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.actionTime;e.basicMove(F[i],2,t,n,o)}}))}}]),t}(),A={name:"cube",data:function(){return{width:600,height:600,moveTime:1e3,updating:!1,dragging:!1,moving:!1,lastX:-1,lastY:-1}},mounted:function(){var t=this;this.$nextTick((function(){t.initScene()})),this.registerKeyEvents(),this.registerMove()},methods:{registerKeyEvents:function(){var t=this;window.document.onkeydown=function(e){["KeyR","KeyL","KeyF","KeyB","KeyU","KeyD"].includes(e.code)&&t.move(e.code.slice(-1).toLowerCase(),e.shiftKey)}},registerMove:function(){var t=this;["R","L","U","D","F","B"].forEach((function(e){t["move".concat(e)]=function(i){i?t.rubicCube["move".concat(e,"_")](t.updateView,requestAnimationFrame,t.moveTime):t.rubicCube["move".concat(e)](t.updateView,requestAnimationFrame,t.moveTime)}}))},move:function(t,e){this["move".concat(t.toUpperCase())](e)},initScene:function(){this.scene=new c["l"],this.camera=new c["i"](45,this.width/this.height,1,1e3),this.camera.position.set(0,0,25),this.renderer=new c["o"],this.renderer.setClearColor("#E9EEF3"),this.renderer.setSize(this.width,this.height),this.$refs.cube.append(this.renderer.domElement),this.rubicCube=new B(3,2.8,this.moveTime),this.rubicCube.bindScene(this.scene),this.ambientLight=new c["a"]("#ffffff"),this.spotLight=this.getSpotLight(),this.scene.add(this.ambientLight),this.scene.add(this.spotLight),this.rubicCube.rotate(new c["n"](1,0,0),.3),this.rubicCube.rotate(new c["n"](0,1,0),-.3),this.updateView()},getSpotLight:function(){var t="#ffffff",e=new c["m"](t);e.position.set(0,5,20);var i=new c["h"];return e.target=i,e},updateView:function(){var t=this;this.updating||(this.updating=!0,this.renderer.render(this.scene,this.camera),this.$nextTick((function(){t.updating=!1})))},mouseDown:function(t){var e=t.clientX,i=t.clientY,n=t.target.getBoundingClientRect();n.left<=e&&e<n.right&&n.top<=i&&i<n.bottom&&(this.lastX=e,this.lastY=i,this.dragging=!0)},mouseMove:function(t){var e=t.clientX,i=t.clientY;if(1===t.buttons){var n=100/6e4,o=n*(e-this.lastX),r=n*(i-this.lastY);this.lastX=e,this.lastY=i,this.rubicCube.rotate(new c["n"](1,0,0),r),this.rubicCube.rotate(new c["n"](0,1,0),o),this.updateView()}},mouseUp:function(){this.dragging&&this.updateView(),this.dragging=!1}}},E=A,D=(i("a704"),i("2877")),z=Object(D["a"])(E,r,s,!1,null,"5d462be8",null),_=z.exports,P={name:"rubic-cube",components:{Cube:_}},R=P,V=(i("cf9b"),Object(D["a"])(R,n,o,!1,null,"114e364c",null));e["default"]=V.exports},"454f":function(t,e,i){i("46a7");var n=i("584a").Object;t.exports=function(t,e,i){return n.defineProperty(t,e,i)}},"46a7":function(t,e,i){var n=i("63b6");n(n.S+n.F*!i("8e60"),"Object",{defineProperty:i("d9f6").f})},5147:function(t,e,i){var n=i("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,!"/./"[t](e)}catch(o){}}return!0}},6762:function(t,e,i){"use strict";var n=i("5ca1"),o=i("c366")(!0);n(n.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")("includes")},"85f2":function(t,e,i){t.exports=i("454f")},a704:function(t,e,i){"use strict";var n=i("d004"),o=i.n(n);o.a},aae3:function(t,e,i){var n=i("d3f4"),o=i("2d95"),r=i("2b4c")("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==o(t))}},ac6a:function(t,e,i){for(var n=i("cadf"),o=i("0d58"),r=i("2aba"),s=i("7726"),c=i("32e9"),a=i("84f2"),u=i("2b4c"),l=u("iterator"),f=u("toStringTag"),h=a.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},b=o(d),v=0;v<b.length;v++){var p,g=b[v],m=d[g],w=s[g],S=w&&w.prototype;if(S&&(S[l]||c(S,l,h),S[f]||c(S,f,g),a[g]=h,m))for(p in n)S[p]||r(S,p,n[p],!0)}},cf9b:function(t,e,i){"use strict";var n=i("f533"),o=i.n(n);o.a},d004:function(t,e,i){},d2c8:function(t,e,i){var n=i("aae3"),o=i("be13");t.exports=function(t,e,i){if(n(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(o(t))}},f533:function(t,e,i){}}]);
//# sourceMappingURL=chunk-1d2546e9.4f4f957f.js.map